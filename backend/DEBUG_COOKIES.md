# üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å cookies –≤ production

## –°–∏–º–ø—Ç–æ–º—ã

- ‚úÖ `/login` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
- ‚ùå `/my-courses` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 "Not authenticated"
- Frontend: `https://onlearn-labs-11.onrender.com`
- Backend: `https://onlearn-labs.onrender.com`

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ `SameSite=None` –¥–ª—è production (–∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
2. ‚úÖ `Secure=True` –¥–ª—è HTTPS –≤ production
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Render

–í Render Dashboard ‚Üí Logs –∏—â–∏—Ç–µ:

```
[LOGIN] Setting cookie: user_id=1, secure=True, samesite=none, is_production=True
[AUTH DEBUG] Cookie received: 1 (–∏–ª–∏ None –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏—à–ª–∞)
[AUTH DEBUG] All cookies: {...}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (DevTools)

**–ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞:**

1. **F12 ‚Üí Application ‚Üí Cookies ‚Üí `https://onlearn-labs.onrender.com`**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å cookie `session_user_id`
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å `Secure` ‚úÖ
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å `SameSite=None` ‚úÖ
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å `HttpOnly` ‚úÖ

2. **F12 ‚Üí Network ‚Üí `/login` ‚Üí Response Headers**
   –ò—â–∏—Ç–µ:
   ```
   Set-Cookie: session_user_id=1; HttpOnly; Secure; SameSite=None; Path=/; Max-Age=604800
   ```

3. **F12 ‚Üí Network ‚Üí `/my-courses` ‚Üí Request Headers**
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   Cookie: session_user_id=1
   ```

### 3. –ï—Å–ª–∏ cookie –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç `SameSite=None` –±–µ–∑ `Secure`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
- CORS –ø—Ä–æ–±–ª–µ–º—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `FRONTEND_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Render
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –Ω–∞ HTTPS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Render –Ω–∞ –æ—à–∏–±–∫–∏

### 4. –ï—Å–ª–∏ cookie —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Request Headers –≤ `/my-courses`:**
- –ï—Å–ª–∏ –Ω–µ—Ç `Cookie: session_user_id=1` ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å –±—Ä–∞—É–∑–µ—Ä–æ–º/–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ï—Å–ª–∏ –µ—Å—Ç—å, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ 401 ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å —á—Ç–µ–Ω–∏–µ–º –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS

–í Response Headers `/my-courses` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
```
Access-Control-Allow-Origin: https://onlearn-labs-11.onrender.com
Access-Control-Allow-Credentials: true
```

## –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç cookie

**–°–∏–º–ø—Ç–æ–º—ã:** Cookie –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ DevTools –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –û—á–∏—Å—Ç–∏—Ç–µ –≤—Å–µ cookies –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ –¥–ª—è —Ç–µ—Å—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ third-party cookies)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Cookie —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** Cookie –µ—Å—Ç—å –≤ DevTools, –Ω–æ –Ω–µ—Ç –≤ Request Headers `/my-courses`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç —Å `credentials: 'include'` (—É–∂–µ –µ—Å—Ç—å)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –±—ç–∫–µ–Ω–¥ –Ω–µ —á–∏—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:** Cookie –µ—Å—Ç—å –≤ Request Headers, –Ω–æ 401

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Render - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `[AUTH DEBUG]` —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `get_current_user` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç cookie

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Render
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ DevTools
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Request/Response Headers –≤ Network
5. –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è!

